<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>map</title>

<script src="site_libs/header-attrs-2.18/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Exploratory Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="eda.html">Yelp Review Data</a>
    </li>
    <li>
      <a href="map.html">NYC Inspection Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="stat_analysis.html">Statistical Analysis</a>
</li>
<li>
  <a href="report.html">Project Report</a>
</li>
<li>
  <a href="https://sweetsugar.shinyapps.io/recommender">Shiny app</a>
</li>
<li>
  <a href="mailto:&lt;js6177@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/xx2416/p8105_final">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">map</h1>

</div>


<div id="top-10-violations" class="section level2">
<h2>Top 10 violations</h2>
<p>There are a total of 169 distinct types of violations documented for
NYC restaurants, and one restaurant may have fallen into more than one
category. The following graph lists the 10 most common violations of NYC
restaurants, followed by a table that exhibits the abbreviated violation
descriptions and the corresponding frequencies. A complete description
for all violations could be found <a
href="full_vio_descr.html">here</a>.</p>
<pre class="r"><code>top_10_vio = inspection_raw %&gt;%
  mutate(
    violation_description = as.factor(violation_description)
  ) %&gt;%
  group_by(violation_description) %&gt;%
  summarize(
    n = n()
  ) %&gt;%
  mutate(
    rank = rank(-n, ties.method = &quot;first&quot;)
  ) %&gt;% 
  filter(rank &lt;=10) %&gt;%
  arrange(desc(n)) %&gt;% mutate(
    rank = as.factor(rank)
  ) %&gt;%
  mutate(
    abb_violation = fct_recode(
      rank,
      &quot;Non-food contact surface improperly constructed&quot; = &quot;1&quot;,
      &quot;Food contact surface not properly cleaned&quot; = &quot;2&quot;,
      &quot;Unacceptable materials&quot; = &quot;3&quot;,
      &quot;Facility not vermin proof&quot; = &quot;4&quot;, 
      &quot;Not free of harborage&quot; = &quot;5&quot;,
      &quot;Evidence of mice or live mice present&quot; = &quot;6&quot;,
      &quot;Filth flies or food/refuse/sewage with FRSA  flies&quot;  = &quot;7&quot;,
      &quot;Cold CT food held above 41 F&quot; = &quot;8&quot;,
      &quot;Cold food item held above 41 F&quot; = &quot;9&quot;,
     &quot;Evidence of mice or live mice in establishment’s food or non-food areas&quot; = &quot;10&quot;
        )
  )

top_10_vio %&gt;%
  ggplot(aes(x = rank, y = n, fill = n), data = .)+geom_bar(stat=&quot;identity&quot;)+labs(x = &quot;violation type&quot;, y = &quot;frequency&quot;, caption = &quot;Exact violation type and associated frquency is shown in the following table&quot;)</code></pre>
<p><img src="map_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code>top_10_vio %&gt;% 
  select(abb_violation, n) %&gt;%
  knitr::kable()</code></pre>
<table>
<colgroup>
<col width="93%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">abb_violation</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Non-food contact surface improperly constructed</td>
<td align="right">2854</td>
</tr>
<tr class="even">
<td align="left">Food contact surface not properly cleaned</td>
<td align="right">2498</td>
</tr>
<tr class="odd">
<td align="left">Unacceptable materials</td>
<td align="right">1504</td>
</tr>
<tr class="even">
<td align="left">Facility not vermin proof</td>
<td align="right">1445</td>
</tr>
<tr class="odd">
<td align="left">Not free of harborage</td>
<td align="right">1395</td>
</tr>
<tr class="even">
<td align="left">Evidence of mice or live mice present</td>
<td align="right">1270</td>
</tr>
<tr class="odd">
<td align="left">Filth flies or food/refuse/sewage with FRSA flies</td>
<td align="right">1126</td>
</tr>
<tr class="even">
<td align="left">Cold CT food held above 41 F</td>
<td align="right">1064</td>
</tr>
<tr class="odd">
<td align="left">Cold food item held above 41 F</td>
<td align="right">969</td>
</tr>
<tr class="even">
<td align="left">Evidence of mice or live mice in establishment’s food
or non-food areas</td>
<td align="right">576</td>
</tr>
</tbody>
</table>
</div>
<div id="top-10-violations-vs.-cuisine-type" class="section level2">
<h2>top 10 violations vs. cuisine type</h2>
<pre class="r"><code>vio_cuisine_bar&lt;-
  inspection_raw %&gt;% 
  filter(violation_description %in% top_10_vio$violation_description) %&gt;%
  group_by(violation_description,cuisine_description) %&gt;% 
  summarize(n_obs=n()) %&gt;% 
  filter(min_rank(desc(n_obs))&lt;=5) %&gt;%
  left_join(top_10_vio) %&gt;% 
  select(abb_violation,cuisine_description,n_obs,rank) %&gt;% 
  ggplot(aes(x=cuisine_description
             ,y=n_obs,fill=cuisine_description))+
  geom_bar(position=&quot;dodge&quot;, stat=&quot;identity&quot;)+
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))+
  theme(axis.text.x = element_text(size = 4))+
  labs(
    x=&quot;top 5 cuisine types at top 10 most frequently appeared violation&quot;,
    y=&quot;Number&quot;
  )+
  facet_grid(~rank)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;violation_description&#39;. You can override
## using the `.groups` argument.
## Joining, by = &quot;violation_description&quot;
## Adding missing grouping variables: `violation_description`</code></pre>
<pre class="r"><code>ggplotly(vio_cuisine_bar)</code></pre>
<div id="htmlwidget-d03a39d82fab3743dc26" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d03a39d82fab3743dc26">{"x":{"data":[{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[405],"text":"cuisine_description: American<br />n_obs: 405<br />cuisine_description: American","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"American","legendgroup":"American","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[383],"text":"cuisine_description: American<br />n_obs: 383<br />cuisine_description: American","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"American","legendgroup":"American","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[306],"text":"cuisine_description: American<br />n_obs: 306<br />cuisine_description: American","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"American","legendgroup":"American","showlegend":false,"xaxis":"x3","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[249],"text":"cuisine_description: American<br />n_obs: 249<br />cuisine_description: American","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"American","legendgroup":"American","showlegend":false,"xaxis":"x4","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[194],"text":"cuisine_description: American<br />n_obs: 194<br />cuisine_description: American","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"American","legendgroup":"American","showlegend":false,"xaxis":"x5","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[170],"text":"cuisine_description: American<br />n_obs: 170<br />cuisine_description: American","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"American","legendgroup":"American","showlegend":false,"xaxis":"x6","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[158],"text":"cuisine_description: American<br />n_obs: 158<br />cuisine_description: American","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"American","legendgroup":"American","showlegend":false,"xaxis":"x7","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[168],"text":"cuisine_description: American<br />n_obs: 168<br />cuisine_description: American","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"American","legendgroup":"American","showlegend":false,"xaxis":"x8","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[112],"text":"cuisine_description: American<br />n_obs: 112<br />cuisine_description: American","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"American","legendgroup":"American","showlegend":false,"xaxis":"x9","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[86],"text":"cuisine_description: American<br />n_obs:  86<br />cuisine_description: American","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"American","legendgroup":"American","showlegend":false,"xaxis":"x10","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[2],"y":[117],"text":"cuisine_description: Bakery Products/Desserts<br />n_obs: 117<br />cuisine_description: Bakery Products/Desserts","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(211,146,0,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Bakery Products/Desserts","legendgroup":"Bakery Products/Desserts","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[2],"y":[60],"text":"cuisine_description: Bakery Products/Desserts<br />n_obs:  60<br />cuisine_description: Bakery Products/Desserts","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(211,146,0,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Bakery Products/Desserts","legendgroup":"Bakery Products/Desserts","showlegend":false,"xaxis":"x7","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[49],"text":"cuisine_description: Caribbean<br />n_obs:  49<br />cuisine_description: Caribbean","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(147,170,0,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Caribbean","legendgroup":"Caribbean","showlegend":true,"xaxis":"x9","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[31],"text":"cuisine_description: Caribbean<br />n_obs:  31<br />cuisine_description: Caribbean","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(147,170,0,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Caribbean","legendgroup":"Caribbean","showlegend":false,"xaxis":"x10","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[290],"text":"cuisine_description: Chinese<br />n_obs: 290<br />cuisine_description: Chinese","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Chinese","legendgroup":"Chinese","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[268],"text":"cuisine_description: Chinese<br />n_obs: 268<br />cuisine_description: Chinese","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Chinese","legendgroup":"Chinese","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[119],"text":"cuisine_description: Chinese<br />n_obs: 119<br />cuisine_description: Chinese","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Chinese","legendgroup":"Chinese","showlegend":false,"xaxis":"x3","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[127],"text":"cuisine_description: Chinese<br />n_obs: 127<br />cuisine_description: Chinese","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Chinese","legendgroup":"Chinese","showlegend":false,"xaxis":"x4","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[193],"text":"cuisine_description: Chinese<br />n_obs: 193<br />cuisine_description: Chinese","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Chinese","legendgroup":"Chinese","showlegend":false,"xaxis":"x5","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[157],"text":"cuisine_description: Chinese<br />n_obs: 157<br />cuisine_description: Chinese","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Chinese","legendgroup":"Chinese","showlegend":false,"xaxis":"x6","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[143],"text":"cuisine_description: Chinese<br />n_obs: 143<br />cuisine_description: Chinese","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Chinese","legendgroup":"Chinese","showlegend":false,"xaxis":"x7","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[105],"text":"cuisine_description: Chinese<br />n_obs: 105<br />cuisine_description: Chinese","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Chinese","legendgroup":"Chinese","showlegend":false,"xaxis":"x8","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[156],"text":"cuisine_description: Chinese<br />n_obs: 156<br />cuisine_description: Chinese","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Chinese","legendgroup":"Chinese","showlegend":false,"xaxis":"x9","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[28],"text":"cuisine_description: Chinese<br />n_obs:  28<br />cuisine_description: Chinese","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Chinese","legendgroup":"Chinese","showlegend":false,"xaxis":"x10","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[252],"text":"cuisine_description: Coffee/Tea<br />n_obs: 252<br />cuisine_description: Coffee/Tea","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,193,159,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Coffee/Tea","legendgroup":"Coffee/Tea","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[176],"text":"cuisine_description: Coffee/Tea<br />n_obs: 176<br />cuisine_description: Coffee/Tea","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,193,159,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Coffee/Tea","legendgroup":"Coffee/Tea","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[176],"text":"cuisine_description: Coffee/Tea<br />n_obs: 176<br />cuisine_description: Coffee/Tea","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,193,159,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Coffee/Tea","legendgroup":"Coffee/Tea","showlegend":false,"xaxis":"x3","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[113],"text":"cuisine_description: Coffee/Tea<br />n_obs: 113<br />cuisine_description: Coffee/Tea","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,193,159,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Coffee/Tea","legendgroup":"Coffee/Tea","showlegend":false,"xaxis":"x4","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[77],"text":"cuisine_description: Coffee/Tea<br />n_obs:  77<br />cuisine_description: Coffee/Tea","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,193,159,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Coffee/Tea","legendgroup":"Coffee/Tea","showlegend":false,"xaxis":"x5","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[85],"text":"cuisine_description: Coffee/Tea<br />n_obs:  85<br />cuisine_description: Coffee/Tea","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,193,159,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Coffee/Tea","legendgroup":"Coffee/Tea","showlegend":false,"xaxis":"x6","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[97],"text":"cuisine_description: Coffee/Tea<br />n_obs:  97<br />cuisine_description: Coffee/Tea","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,193,159,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Coffee/Tea","legendgroup":"Coffee/Tea","showlegend":false,"xaxis":"x7","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[81],"text":"cuisine_description: Coffee/Tea<br />n_obs:  81<br />cuisine_description: Coffee/Tea","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,193,159,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Coffee/Tea","legendgroup":"Coffee/Tea","showlegend":false,"xaxis":"x8","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[52],"text":"cuisine_description: Coffee/Tea<br />n_obs:  52<br />cuisine_description: Coffee/Tea","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,193,159,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Coffee/Tea","legendgroup":"Coffee/Tea","showlegend":false,"xaxis":"x10","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[6],"y":[63],"text":"cuisine_description: Italian<br />n_obs:  63<br />cuisine_description: Italian","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,185,227,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Italian","legendgroup":"Italian","showlegend":true,"xaxis":"x3","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[6],"y":[52],"text":"cuisine_description: Italian<br />n_obs:  52<br />cuisine_description: Italian","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,185,227,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Italian","legendgroup":"Italian","showlegend":false,"xaxis":"x6","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[7],"y":[66],"text":"cuisine_description: Japanese<br />n_obs:  66<br />cuisine_description: Japanese","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Japanese","legendgroup":"Japanese","showlegend":true,"xaxis":"x3","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[7],"y":[52],"text":"cuisine_description: Japanese<br />n_obs:  52<br />cuisine_description: Japanese","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Japanese","legendgroup":"Japanese","showlegend":false,"xaxis":"x9","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[8],"y":[98],"text":"cuisine_description: Mexican<br />n_obs:  98<br />cuisine_description: Mexican","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(219,114,251,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Mexican","legendgroup":"Mexican","showlegend":true,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[8],"y":[59],"text":"cuisine_description: Mexican<br />n_obs:  59<br />cuisine_description: Mexican","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(219,114,251,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Mexican","legendgroup":"Mexican","showlegend":false,"xaxis":"x4","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[8],"y":[64],"text":"cuisine_description: Mexican<br />n_obs:  64<br />cuisine_description: Mexican","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(219,114,251,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Mexican","legendgroup":"Mexican","showlegend":false,"xaxis":"x5","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[8],"y":[46],"text":"cuisine_description: Mexican<br />n_obs:  46<br />cuisine_description: Mexican","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(219,114,251,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Mexican","legendgroup":"Mexican","showlegend":false,"xaxis":"x8","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[9],"y":[189],"text":"cuisine_description: Pizza<br />n_obs: 189<br />cuisine_description: Pizza","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,97,195,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Pizza","legendgroup":"Pizza","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[9],"y":[167],"text":"cuisine_description: Pizza<br />n_obs: 167<br />cuisine_description: Pizza","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,97,195,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Pizza","legendgroup":"Pizza","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[9],"y":[73],"text":"cuisine_description: Pizza<br />n_obs:  73<br />cuisine_description: Pizza","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,97,195,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Pizza","legendgroup":"Pizza","showlegend":false,"xaxis":"x4","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[9],"y":[101],"text":"cuisine_description: Pizza<br />n_obs: 101<br />cuisine_description: Pizza","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,97,195,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Pizza","legendgroup":"Pizza","showlegend":false,"xaxis":"x5","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[9],"y":[114],"text":"cuisine_description: Pizza<br />n_obs: 114<br />cuisine_description: Pizza","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,97,195,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Pizza","legendgroup":"Pizza","showlegend":false,"xaxis":"x6","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[9],"y":[68],"text":"cuisine_description: Pizza<br />n_obs:  68<br />cuisine_description: Pizza","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,97,195,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Pizza","legendgroup":"Pizza","showlegend":false,"xaxis":"x7","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[9],"y":[59],"text":"cuisine_description: Pizza<br />n_obs:  59<br />cuisine_description: Pizza","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,97,195,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Pizza","legendgroup":"Pizza","showlegend":false,"xaxis":"x8","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[9],"y":[103],"text":"cuisine_description: Pizza<br />n_obs: 103<br />cuisine_description: Pizza","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,97,195,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Pizza","legendgroup":"Pizza","showlegend":false,"xaxis":"x9","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[9],"y":[43],"text":"cuisine_description: Pizza<br />n_obs:  43<br />cuisine_description: Pizza","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,97,195,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Pizza","legendgroup":"Pizza","showlegend":false,"xaxis":"x10","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":37.9178082191781,"r":18.9954337899543,"b":92.2540473225405,"l":43.1050228310502},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[5.55111512312578e-17,0.0891280713198522],"automargin":true,"type":"linear","autorange":false,"range":[0.4,9.6],"tickmode":"array","ticktext":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"tickvals":[1,2,3,4,5,6,7,8,9],"categoryorder":"array","categoryarray":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":5.31340805313408},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"annotations":[{"text":"top 5 cuisine types at top 10 most frequently appeared violation","x":0.5,"y":0,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"top","annotationType":"axis","yshift":-73.9892071398921},{"text":"Number","x":0,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-90,"xanchor":"right","yanchor":"center","annotationType":"axis","xshift":-27.7625570776256},{"text":"1","x":0.0445640356599261,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"2","x":0.15,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"3","x":0.25,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"4","x":0.35,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"5","x":0.45,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"6","x":0.55,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"7","x":0.65,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"8","x":0.75,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"9","x":0.85,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"10","x":0.955435964340074,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-20.25,425.25],"tickmode":"array","ticktext":["0","100","200","300","400"],"tickvals":[0,100,200,300,400],"categoryorder":"array","categoryarray":["0","100","200","300","400"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":5.55111512312578e-17,"x1":0.0891280713198522,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":5.55111512312578e-17,"x1":0.0891280713198522,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.110871928680148,"x1":0.189128071319852,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.110871928680148,"x1":0.189128071319852,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.210871928680148,"x1":0.289128071319852,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.210871928680148,"x1":0.289128071319852,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.310871928680148,"x1":0.389128071319852,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.310871928680148,"x1":0.389128071319852,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.410871928680148,"x1":0.489128071319852,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.410871928680148,"x1":0.489128071319852,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.510871928680148,"x1":0.589128071319852,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.510871928680148,"x1":0.589128071319852,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.610871928680148,"x1":0.689128071319852,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.610871928680148,"x1":0.689128071319852,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.710871928680148,"x1":0.789128071319852,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.710871928680148,"x1":0.789128071319852,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.810871928680148,"x1":0.889128071319852,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.810871928680148,"x1":0.889128071319852,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.910871928680148,"x1":1,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.910871928680148,"x1":1,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"}],"xaxis2":{"type":"linear","autorange":false,"range":[0.4,9.6],"tickmode":"array","ticktext":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"tickvals":[1,2,3,4,5,6,7,8,9],"categoryorder":"array","categoryarray":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":5.31340805313408},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.110871928680148,0.189128071319852],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"xaxis3":{"type":"linear","autorange":false,"range":[0.4,9.6],"tickmode":"array","ticktext":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"tickvals":[1,2,3,4,5,6,7,8,9],"categoryorder":"array","categoryarray":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":5.31340805313408},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.210871928680148,0.289128071319852],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"xaxis4":{"type":"linear","autorange":false,"range":[0.4,9.6],"tickmode":"array","ticktext":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"tickvals":[1,2,3,4,5,6,7,8,9],"categoryorder":"array","categoryarray":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":5.31340805313408},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.310871928680148,0.389128071319852],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"xaxis5":{"type":"linear","autorange":false,"range":[0.4,9.6],"tickmode":"array","ticktext":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"tickvals":[1,2,3,4,5,6,7,8,9],"categoryorder":"array","categoryarray":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":5.31340805313408},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.410871928680148,0.489128071319852],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"xaxis6":{"type":"linear","autorange":false,"range":[0.4,9.6],"tickmode":"array","ticktext":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"tickvals":[1,2,3,4,5,6,7,8,9],"categoryorder":"array","categoryarray":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":5.31340805313408},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.510871928680148,0.589128071319852],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"xaxis7":{"type":"linear","autorange":false,"range":[0.4,9.6],"tickmode":"array","ticktext":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"tickvals":[1,2,3,4,5,6,7,8,9],"categoryorder":"array","categoryarray":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":5.31340805313408},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.610871928680148,0.689128071319852],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"xaxis8":{"type":"linear","autorange":false,"range":[0.4,9.6],"tickmode":"array","ticktext":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"tickvals":[1,2,3,4,5,6,7,8,9],"categoryorder":"array","categoryarray":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":5.31340805313408},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.710871928680148,0.789128071319852],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"xaxis9":{"type":"linear","autorange":false,"range":[0.4,9.6],"tickmode":"array","ticktext":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"tickvals":[1,2,3,4,5,6,7,8,9],"categoryorder":"array","categoryarray":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":5.31340805313408},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.810871928680148,0.889128071319852],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"xaxis10":{"type":"linear","autorange":false,"range":[0.4,9.6],"tickmode":"array","ticktext":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"tickvals":[1,2,3,4,5,6,7,8,9],"categoryorder":"array","categoryarray":["American","Bakery Products/Desserts","Caribbean","Chinese","Coffee/Tea","Italian","Japanese","Mexican","Pizza"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":5.31340805313408},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.910871928680148,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"cuisine_description","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"d63955007b28":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"d63955007b28","visdat":{"d63955007b28":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="inspection-letter-grade" class="section level1">
<h1>Inspection Letter Grade</h1>
<p>The <a
href="https://www1.nyc.gov/site/doh/business/food-operators/letter-grading-for-restaurants.page">letter
grading program</a> for NYC restaurant was initiated on July 27, 2010,
which involved a two-step inspection process: restaurants who do not
receive an “A” on their initial inspection will be re-inspected within
no less than 7 days.</p>
<p>There are a total of 5 categories of letter grade:</p>
<ul>
<li><p>A score of less than 14 points on either initial or re-inspection
results in an “A” grade</p></li>
<li><p>On re-inspection, a score of 14-27 points means a restaurant
receives both a “B” grade and a “Grade Pending (Z)” card</p></li>
<li><p>On re-inspection, a score of 28 or more points means a restaurant
receives both a “C” grade and a “Grade Pending (Z)” card</p></li>
<li><p>Certain uncorrected violations may generate additional compliance
inspections, which are ungraded receive letter “N”.</p></li>
</ul>
<p>Additional information could be accessed <a
href="http://www1.nyc.gov/assets/doh/downloads/pdf/rii/blue-book.pdf">here</a>.</p>
<p>For the purpose of our analysis, we consider restaurants with grade
“A”, “B” or “C”.</p>
<pre class="r"><code>inspection_raw %&gt;%
  filter(!is.na(boro),
         grade == &quot;A&quot;|grade == &quot;B&quot;|grade ==&quot;C&quot;) %&gt;%
  group_by(boro, grade) %&gt;%
  summarize(
    total = n()
  ) %&gt;% mutate(
      prop = (total/sum(total))*100
  ) %&gt;%
  ggplot(aes(x = boro, y = prop, fill = grade), data =.) + geom_bar(stat = &quot;identity&quot;, position=&quot;stack&quot;) + labs(title = &quot;Inspection grade propotions by Boroughs&quot;, y = &quot;percent&quot;, x = &quot;borough&quot;)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;boro&#39;. You can override using the
## `.groups` argument.</code></pre>
<p><img src="map_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>The above graph shows the proportions of each letter grade for
different boroughs of NYC. The majority of the restaurants in NYC
received an “A” as the inspection grade, either during the initial
inspection or re-inspection. Among all boroughs in NYC, Bronx was the
one with the highest proportion of restaurants receiving a grade “C”.
Staten Island had the highest proportion of restaurants with grade “A”
and no restaurant with grade “C”, followed by Manhattan which had the
second highest proportion of grade “A” restaurants.</p>
<div id="grade-associated-with-the-inspection-vs.-boro-cuisine-type"
class="section level2">
<h2>grade associated with the inspection vs. boro / cuisine type</h2>
<pre class="r"><code>grade_boro&lt;-
  inspection_raw %&gt;% 
  filter(grade %in% c(&quot;A&quot;,&quot;B&quot;,&quot;C&quot;)) %&gt;%
  mutate(boro=fct_infreq(boro)) %&gt;% 
  ggplot(aes(x = boro, fill = grade))+
  geom_bar()+
  labs(
    x=&quot;Borough&quot;,
    y=&quot;Number&quot;
  )
top_10_cuisine&lt;-
  inspection_raw %&gt;% 
  filter(grade %in% c(&quot;A&quot;,&quot;B&quot;,&quot;C&quot;)) %&gt;%
  group_by(cuisine_description) %&gt;% 
  summarise(n_obs=n()) %&gt;% 
  filter(min_rank(desc(n_obs))&lt;=10) 
grade_cuisine&lt;-
  inspection_raw %&gt;% 
  filter(grade %in% c(&quot;A&quot;,&quot;B&quot;,&quot;C&quot;) &amp; cuisine_description %in% top_10_cuisine$cuisine_description) %&gt;% 
  mutate(cuisine_description=fct_infreq(cuisine_description)) %&gt;% 
  ggplot(aes(x=cuisine_description,fill=grade))+
  geom_bar()+
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))+
  labs(
    x=&quot;Cuisine&quot;,
    y=&quot;Number&quot;
  )
grade_boro/grade_cuisine</code></pre>
<p><img src="map_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
</div>
<div id="critical-flag" class="section level1">
<h1>Critical Flag</h1>
<p>Depending on the seriousness of the violations, Health Code
violations are categorized as “critical” or “general (not
critical)”.</p>
<p>Critical violations are more likely than the general ones to
contribute to food-borne illness, because they may be a substantial risk
to the public’s health. For instance, failing to cook food to required
temperatures is a critical violation, while failing to provide an
accurate thermometer in a refrigerator is a general violation. Hence, a
restaurant could have more than one critical violations or flags.</p>
<div id="proportions-of-critical-violations" class="section level2">
<h2>Proportions of Critical Violations</h2>
<pre class="r"><code>inspection_raw %&gt;%
  filter(!is.na(grade),
         !is.na(boro),
         critical_flag == &quot;Critical&quot;| critical_flag == &quot;Not Critical&quot;) %&gt;%
  group_by(boro,critical_flag) %&gt;%
  summarize(
    total = n()
  ) %&gt;% mutate(
      prop = (total/sum(total))*100
  ) %&gt;%
  ggplot(aes(x = boro, y = prop, fill = critical_flag), data =.) + geom_bar(stat = &quot;identity&quot;, position=&quot;stack&quot;) + labs(title = &quot;Percent with critical flag by boroughs&quot;)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;boro&#39;. You can override using the
## `.groups` argument.</code></pre>
<p><img src="map_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>As shown above, more than 50 percent of the violations are not
critical. In addition, the ratio of critical to non-critical violations
is approximately the same across different boroughs of NYC.</p>
</div>
<div id="critical-flag-density-map" class="section level2">
<h2>Critical Flag Density Map</h2>
<p>The following interactive map uses the inspection data and
illustrates the distribution of restaurant with critical violations in
NYC. This map is generated by <a href="https://plotly.com/">Plotly Chart
Library</a> and <a href="https://www.mapbox.com/">Mapbox</a> geolocation
function.</p>
<pre><code>## &lt;request&gt;
## Options:
## * : list(x = list(visdat = list(d639623967c9 = function () 
## plotlyVisDat), cur_data = &quot;d639623967c9&quot;, attrs = list(d639623967c9 = list(lon = ~longitude, lat = ~latitude, radius = 3, alpha_stroke = 1, sizes = c(10, 100), spans = c(1, 20), type = &quot;densitymapbox&quot;)), layout = list(width = NULL, height = NULL, margin = list(b = 40, l = 60, t = 25, r = 10)), source = &quot;A&quot;, config = list(modeBarButtonsToAdd = c(&quot;hoverclosest&quot;, &quot;hovercompare&quot;), showSendToCloud = FALSE), layoutAttrs = list(d639623967c9 = list(mapbox = list(style = &quot;streets&quot;, zoom = 10.5, center = list(
##     lat = 40.71, lon = -73.98)), title = &quot;Density Heatmap of Restaurants with Critical Flag&quot;))), width = NULL, height = NULL, sizingPolicy = list(defaultWidth = &quot;100%&quot;, defaultHeight = 400, padding = 0, viewer = list(defaultWidth = NULL, defaultHeight = NULL, padding = NULL, fill = TRUE, suppress = FALSE, paneHeight = NULL), browser = list(defaultWidth = NULL, defaultHeight = NULL, padding = NULL, fill = TRUE, external = FALSE), knitr = list(defaultWidth = NULL, defaultHeight = NULL, figure = TRUE)), 
##     dependencies = list(list(name = &quot;typedarray&quot;, version = &quot;0.1&quot;, src = list(file = &quot;htmlwidgets/lib/typedarray&quot;), meta = NULL, script = &quot;typedarray.min.js&quot;, stylesheet = NULL, head = NULL, attachment = NULL, package = &quot;plotly&quot;, all_files = FALSE), list(name = &quot;jquery&quot;, version = &quot;3.5.1&quot;, src = list(file = &quot;lib/jquery&quot;), meta = NULL, script = &quot;jquery.min.js&quot;, stylesheet = NULL, head = NULL, attachment = NULL, package = &quot;crosstalk&quot;, all_files = TRUE), list(name = &quot;crosstalk&quot;, version = &quot;1.2.0&quot;, src = list(
##         file = &quot;www&quot;), meta = NULL, script = &quot;js/crosstalk.min.js&quot;, stylesheet = &quot;css/crosstalk.min.css&quot;, head = NULL, attachment = NULL, package = &quot;crosstalk&quot;, all_files = TRUE), list(name = &quot;plotly-htmlwidgets-css&quot;, version = &quot;2.11.1&quot;, src = list(file = &quot;htmlwidgets/lib/plotlyjs&quot;), meta = NULL, script = NULL, stylesheet = &quot;plotly-htmlwidgets.css&quot;, head = NULL, attachment = NULL, package = &quot;plotly&quot;, all_files = FALSE), list(name = &quot;plotly-main&quot;, version = &quot;2.11.1&quot;, src = list(file = &quot;htmlwidgets/lib/plotlyjs&quot;), 
##         meta = NULL, script = &quot;plotly-latest.min.js&quot;, stylesheet = NULL, head = NULL, attachment = NULL, package = &quot;plotly&quot;, all_files = FALSE)), elementId = NULL, preRenderHook = function (p, registerFrames = TRUE) 
##     {
##         UseMethod(&quot;plotly_build&quot;)
##     }, jsHooks = list())
## * mapboxAccessToken: pk.eyJ1IjoidGhlb25seXZpcGVyNjYiLCJhIjoiY2xiZWY3dmp6MGFyeTNwcXppdzRnYm1nbyJ9.G05d_geqdk2HTTdZRmOmzg</code></pre>
<p>According to the density heat map, restaurants with critical
violations are more frequently found in some of the busier area of each
borough: for instance, Soho and West Village in lower Manhattan, Korean
Town in middle Manhattan, Williamsburg in Brooklyn, Jackson Heights and
Main Street in Queens, etc.</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
